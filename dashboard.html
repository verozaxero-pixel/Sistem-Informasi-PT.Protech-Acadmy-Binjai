<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard - PT Protech Academy</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    nav.sidebar {
      width: 220px;
      background: #222d44;
      color: white;
      min-height: 100vh;
      padding: 20px 10px;
      box-sizing: border-box;
      flex-shrink: 0;
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
    }

    nav.sidebar .logo-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      padding-left: 10px;
    }

    nav.sidebar .logo-container img {
      width: 40px;
      height: 40px;
      object-fit: contain;
    }

    nav.sidebar h2 {
      margin: 0;
      font-size: 18px;
      font-weight: bold;
    }

    nav.sidebar a {
      display: block;
      padding: 12px 15px;
      color: #ddd;
      text-decoration: none;
      margin-bottom: 8px;
      border-radius: 5px;
    }

    nav.sidebar a.active,
    nav.sidebar a:hover {
      background: #5c77f2;
      color: white;
    }

    main.content {
      margin-left: 220px;
      flex: 1;
      padding: 25px 40px;
      box-sizing: border-box;
      overflow-x: auto;
      background-color: #222d44;
      color: white;
      min-height: calc(100vh - 60px);
    }

    main.content h1 {
      background-color: #1a243b;
      color: white;
      padding: 15px 20px;
      margin: 0 0 20px 0;
      border-radius: 6px;
      box-sizing: border-box;
    }

    .welcome {
      margin-bottom: 30px;
      background: #2e3b5a;
      padding: 20px;
      border-radius: 6px;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

    .welcome h2 {
      margin: 0;
      font-size: 22px;
      color: #ffffff;
    }

    .datetime {
      margin-top: 10px;
      color: #ccc;
      font-size: 14px;
    }

    .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-box {
      flex: 1;
      min-width: 200px;
      background: #2e3b5a;
      padding: 20px;
      border-radius: 6px;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
      text-align: center;
      color: white;
    }

    .stat-box h2 {
      margin: 0 0 10px;
      font-size: 24px;
      color: #5c77f2;
    }

    .stat-box p {
      margin: 0;
      font-size: 18px;
      font-weight: bold;
    }

    canvas {
      background: #2e3b5a;
      border-radius: 6px;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
      padding: 20px;
      margin-top: 20px;
    }

    footer {
      height: 60px;
      background-color: #222d44;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      margin-left: 220px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<nav class="sidebar">
  <div class="logo-container">
    <img src="logo.jpg" alt="Logo Protech" />
    <h2>PT Protech Academy</h2>
  </div>
  <a href="dashboard.html" class="menu-dashboard">üè† Dashboard</a>
  <a href="instruktur.html" class="menu-instruktur">üë®‚Äçüè´ Data Instruktur</a>
  <a href="siswa.html" class="menu-siswa">üë®‚Äçüéì Data Siswa</a>
  <a href="login.html">üîê Logout</a>
</nav>

<main class="content">
  <h1>Dashboard</h1>
  <div class="welcome">
    <h2>Selamat Datang di Sistem Informasi PT Protech Academy Binjai</h2>
    <div class="datetime" id="datetime"></div>
  </div>
  <div class="stats">
    <div class="stat-box">
      <h2>üë®‚Äçüéì</h2>
      <p id="totalSiswa">0</p>
      <p>Total Siswa</p>
    </div>
    <div class="stat-box">
      <h2>üë®‚Äçüè´</h2>
      <p id="totalInstruktur">0</p>
      <p>Total Instruktur</p>
    </div>
  </div>
  <h2 style="color:white;">Statistik Siswa Berdasarkan Kelas</h2>
  <canvas id="chartSiswa" width="600" height="300"></canvas>
</main>

<footer>
  PT Protech Academy Binjai Semua hak cipta dilindungi.  &copy; <span id="year"></span>
</footer>

<script>
  function updateDateTime() {
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const formatted = now.toLocaleDateString('id-ID', options) + ' - ' + now.toLocaleTimeString('id-ID');
    document.getElementById('datetime').textContent = formatted;
  }
  setInterval(updateDateTime, 1000);
  updateDateTime();

  const siswa = JSON.parse(localStorage.getItem('siswa')) || [];
  const instruktur = JSON.parse(localStorage.getItem('instruktur')) || [];
  document.getElementById('totalSiswa').textContent = siswa.length;
  document.getElementById('totalInstruktur').textContent = instruktur.length;

  let rplCount = 0, tkjCount = 0;
  siswa.forEach(s => {
    const kelas = s.kelas?.toLowerCase();
    if (kelas?.includes("rpl")) rplCount++;
    else if (kelas?.includes("tkj")) tkjCount++;
  });

  new Chart(document.getElementById('chartSiswa').getContext('2d'), {
    type: 'bar',
    data: {
      labels: ['RPL', 'TKJ'],
      datasets: [{
        label: 'Jumlah Siswa',
        data: [rplCount, tkjCount],
        backgroundColor: ['#5c77f2', '#28a745']
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            color: 'white'
          }
        },
        x: {
          ticks: {
            color: 'white'
          }
        }
      },
      plugins: {
        legend: {
          labels: {
            color: 'white'
          }
        }
      }
    }
  });

  const page = location.pathname.split("/").pop();
  document.querySelector(`.menu-${page.replace('.html', '')}`)?.classList.add("active");

  document.getElementById('year').textContent = new Date().getFullYear();
</script>

</body>
</html>
